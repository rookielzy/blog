# You Don't Know JavaScript

## 作用域

> 作用域是一套规则，用于确定在何处以及如何查找变量（标识符）。如果查找的目的是对变量进行
赋值，那么就会使用LHS查询；如果目的是获取变量的值，就会使用RHS查询。
赋值操作符会导致LHS查询。＝操作符或调用函数时传入参数的操作都会导致关联作用域的赋值
操作。
JavaScript引擎首先会在代码执行前对其进行编译，在这个过程中，像var a = 2这样的声明会被分
解成两个独立的步骤：
> 1. 首先，var a在其作用域中声明新变量。这会在最开始的阶段，也就是代码执行前进行。
> 2. 接下来，a = 2会查询（LHS查询）变量a并对其进行赋值。
LHS和RHS查询都会在当前执行作用域中开始，如果有需要（也就是说它们没有找到所需的标识
符），就会向上级作用域继续查找目标标识符，这样每次上升一级作用域（一层楼），最后抵达全局
作用域（顶层），无论找到或没找到都将停止。
不成功的RHS引用会导致抛出ReferenceError异常。不成功的LHS引用会导致自动隐式地创建一个
全局变量（非严格模式下），该变量使用LHS引用的目标作为标识符，或者抛出ReferenceError异常
（严格模式下）。


> 需要明确的是，事实上JavaScript并不具有动态作用域。它只有词法作用域，简单明了。但是this机
制某种程度上很像动态作用域。
主要区别：词法作用域是在写代码或者说定义时确定的，而动态作用域是在运行时确定的。（this
也是！）词法作用域关注函数在何处声明，而动态作用域关注函数从何处调用。


## 模块模式

> 需要具备两个必要条件。
> 1. 必须有外部的封闭函数，该函数必须至少被调用一次（每次调用都会创建一个新的模块实例）。
> 2. 封闭函数必须返回至少一个内部函数，这样内部函数才能在私有作用域中形成闭包，并且可以
访问或者修改私有的状态。
一个具有函数属性的对象本身并不是真正的模块。从方便观察的角度看，一个从函数调用所返回
的，只有数据属性而没有闭包函数的对象并不是真正的模块。
